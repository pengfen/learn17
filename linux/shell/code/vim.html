vim 编辑器

文本编辑器 字处理器 ASCII

vim模式
编辑模式(命令模式)  输入模式 末行模式

模式转换
编辑 ---> 输入
i: 在当前光标所在字符的前面 转为输入模式
a: 在当前光标所在字符的后面 转为输入模式

I: 在当前光行所在行的行首 转换为输入模式
A: 在当前光标所在行的行尾 转换为输入模式
O: 在当前光标所在行的上方 新建一行 并转为输入模式

打开文件
# vim /path/to/somefile
vim +#: 打开文件 并定位于第#行
vim +: 打开文件 定位至最后一行
vim +/PATTERN: 打开文件 定位至第一次被PATTERN匹配到的行的行首

默认处于编辑模式

关闭文件
1. 末行模式关闭文件
:q 退出
:wq 保存并退出
:q! 不保存并退出
:w 保存
:w! 强行保存
:wq ---> :x
2. 编辑模式下退出
zz: 保存并退出

移动光标(编辑模式)
1. 逐字符移动 h:左 l:右 j:下 k:上
#h: 移动#个字符
2. 以单词为单位移动
w: 移至下一个单词的词首
e: 跳至当前或下一个单词的词尾
b: 跳至当前或前一个单词的词首
#w:

3.行内跳转
O:绝对行首
^:行首的第一个非空白字符
$:绝对行尾

4.行间跳转
#G: 跳转至第#行
G: 最后一行
末行模式下 直接给出行号即可

翻屏
Ctrl+f: 向下翻一屏
Ctrl+b: 向上翻一屏
Ctrl+d: 向下翻半屏
Ctrl+u: 向上翻半屏

删除单个字符
x: 删除光标所在处的单个字符
#x: 删除光标所在处及向后的共#个字符

删除命令 d
#dw #de #db
dd: 删除当前光标所在行
#dd: 删除包括当前光标所在行内的#行

末行模式下
StartADD,EndADDd
.: 表示当前行
$: 最后一行
+#: 向下的#行

粘贴命令p
p 如果删除或复制为整行内容 则粘贴至光标所在行的下方 如果复制或删除的内容为非整行 则粘贴至光标所在字符的后面
P 如果删除或复制为整行内容 则粘贴至光标所在行的上方 如果复制或删除的内容为非整行 则粘贴至光标所在字符的前面

复制命令y 用法同d命令

修改 先删除内容 再转换为输入模式

替换 r 

撤消编辑操作 u
u: 撤消前一次的编辑操作 连续u命令可撤消此前的n次编辑操作
#u: 直接撤消最近#次编辑操作
撤消最近一次撤消操作 ctrl+r

重复前一次编辑操作 .

可视化模式
v: 按字符选取
V: 按矩形选取

查找
/PATTERN  ?PATTERN

查找并替换
在末行模式下使用s命令
ADDR1,ADDR2s@PATTERN@string@gi

1,$
%: 表示全文
练习 将/etc/yum.repos.d/server.repo文件中的ftp://instructor.example.com/pub 替换为 http://172.16.0.1/yum

%s/ftp:\/\/instructor\.example\.com\/pub/http:\/\/172\.16\.0\.1\/yum/gi
%s/ftp://instructor\.example\.com/pub@http://172.16.0.1/yum@g

使用vim编辑多个文件
vim FILE1 FILE2 FILE3
:next 切换至下一个文件
:prev 切换至前一个文件
:last 切换至最后一个文件
:first 切换至第一个文件

退出
:qa 全部退出

分屏显示一个文件
Ctrl+w s 水平拆分窗口
Ctrl+w v 垂直拆分窗口

在窗口间切换光标
Ctrl+w ARROW
:qa 关闭所有窗口

分窗口编辑多个文件
vim -o 不平分割显示
vim -O 垂直分割显示

将当前文件中部分内容另存为另外一个文件
末行模式下使用w命令
:w
:ADDR1,ADDR2w /path/to/somewhere

将另外一个文件的内容填充在当前文件中
:r /path/to/somefile

跟shell交互
:! COMMAND

高级话题
1.显示或取消显示行号
:set number
:set nu
:set nonu

显示忽略或区分字符大小写
:set ignorecase
:set ic
:set noic

3.设定自动缩进
:set autoindent
:set ai
:set noai

4.查找到的文本高亮显示或取消


#!/bin/bash

declare -i EVENSUM=0
declare -i ODDSUM=0

for I in (1..10); do
    if [ $[$I%2] -eq 0 ]; then
	    let EVENSUM+=$I
	else
	    let ODDSUM+=$I
	fi
done

echo "奇数之和: $ODDSUM"
echo "偶数之和: $EVENSUM"
